{% extends 'base.html.twig' %}

{% block title %}üî• √âDITION PAIEMENT - PHANTOM SHOP{% endblock %}

{% block body %}
<div class="aggressive-shop">
    <!-- HEADER AGGRESSIF -->
    <div class="shop-header">
        <h1 class="shop-title">üî• <span>√âDITION PAIEMENT</span> üî•</h1>
        <p class="shop-subtitle">MODIFICATION ‚Ä¢ TRANSACTION #{{ payment.id }} ‚Ä¢ MISE √Ä JOUR</p>
        
        <!-- QUICK ACTIONS -->
        <div class="quick-actions">
            <a href="{{ path('app_payment_index') }}" class="neon-btn red">
                <i class="fas fa-arrow-left"></i> RETOUR LISTE
            </a>
            <a href="{{ path('app_payment_show', {'id': payment.id}) }}" class="neon-btn blue">
                <i class="fas fa-eye"></i> VOIR D√âTAILS
            </a>
            <button type="submit" form="payment-form" class="neon-btn green">
                <i class="fas fa-save"></i> SAUVEGARDER
            </button>
        </div>
    </div>

    <!-- DEUX COLONNES C√îTE √Ä C√îTE -->
    <div class="dual-columns">
        <!-- COLONNE GAUCHE : FORMULAIRE -->
        <div class="column left-column">
            <div class="column-header">
                <h2><i class="fas fa-edit"></i> MODIFIER LE PAIEMENT</h2>
                <span class="badge-count">ID: {{ payment.id }}</span>
            </div>
            
            <div class="form-container">
                {{ form_start(form, {'attr': {'class': 'neon-form', 'id': 'payment-form'}}) }}
                
                <div class="form-section">
                    <h3 class="form-section-title">
                        <i class="fas fa-money-bill-wave"></i>
                        INFORMATIONS FINANCI√àRES
                    </h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-euro-sign"></i>
                                Montant (‚Ç¨)
                            </label>
                            {{ form_widget(form.amount, {'attr': {
                                'class': 'neon-input',
                                'placeholder': 'Ex: 99.99'
                            }}) }}
                            <div class="form-error">{{ form_errors(form.amount) }}</div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-hashtag"></i>
                                R√©f√©rence
                            </label>
                            {{ form_widget(form.transactionRef, {'attr': {
                                'class': 'neon-input',
                                'placeholder': 'Ex: TRX' ~ random(100000, 999999)
                            }}) }}
                            <div class="form-error">{{ form_errors(form.transactionRef) }}</div>
                        </div>
                    </div>
                </div>
                
                <div class="form-section">
                    <h3 class="form-section-title">
                        <i class="fas fa-credit-card"></i>
                        M√âTHODE & STATUT
                    </h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-credit-card"></i>
                                M√©thode de paiement
                            </label>
                            {{ form_widget(form.paymentMethod, {'attr': {
                                'class': 'neon-select'
                            }}) }}
                            <div class="form-error">{{ form_errors(form.paymentMethod) }}</div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-check-circle"></i>
                                Statut
                            </label>
                            {{ form_widget(form.paymentStatus, {'attr': {
                                'class': 'neon-select'
                            }}) }}
                            <div class="form-error">{{ form_errors(form.paymentStatus) }}</div>
                        </div>
                    </div>
                </div>
                
                <div class="form-section">
                    <h3 class="form-section-title">
                        <i class="far fa-calendar"></i>
                        DATE & HEURE
                    </h3>
                    
                    <div class="form-row">
                        <div class="form-group full-width">
                            <label class="form-label">
                                <i class="fas fa-clock"></i>
                                Date du paiement
                            </label>
                            {{ form_widget(form.paymentDate, {'attr': {
                                'class': 'neon-input datetime-picker'
                            }}) }}
                            <div class="form-error">{{ form_errors(form.paymentDate) }}</div>
                        </div>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="form-btn save-btn">
                        <i class="fas fa-save"></i>
                        METTRE √Ä JOUR
                    </button>
                    <a href="{{ path('app_payment_index') }}" class="form-btn cancel-btn">
                        <i class="fas fa-times"></i>
                        ANNULER
                    </a>
                </div>
                
                {{ form_end(form) }}
            </div>
        </div>

        <!-- COLONNE DROITE : PR√âVISUALISATION -->
        <div class="column right-column">
            <div class="column-header">
                <h2><i class="fas fa-eye"></i> PR√âVISUALISATION</h2>
                <span class="badge-count" id="live-status">{{ payment.paymentStatus|upper }}</span>
            </div>
            
            <div class="preview-container">
                <div class="preview-card {{ payment.paymentStatus }}" id="payment-preview">
                    <div class="preview-header">
                        <div class="preview-id">
                            <i class="fas fa-hashtag"></i>
                            <span id="preview-ref">{{ payment.transactionRef }}</span>
                        </div>
                        <div class="preview-status {{ payment.paymentStatus }}" id="preview-status">
                            {{ payment.paymentStatus|upper }}
                        </div>
                    </div>
                    
                    <div class="preview-body">
                        <div class="preview-amount" id="preview-amount">
                            {{ payment.amount|number_format(2, ',', ' ') }} ‚Ç¨
                        </div>
                        
                        <div class="preview-details">
                            <div class="detail">
                                <span class="label">M√âTHODE:</span>
                                <span class="value" id="preview-method">
                                    {% if payment.paymentMethod == 'card' %}
                                        <i class="fas fa-credit-card"></i> CARTE
                                    {% elseif payment.paymentMethod == 'paypal' %}
                                        <i class="fab fa-paypal"></i> PAYPAL
                                    {% else %}
                                        <i class="fas fa-wallet"></i> WALLET
                                    {% endif %}
                                </span>
                            </div>
                            <div class="detail">
                                <span class="label">DATE:</span>
                                <span class="value" id="preview-date">
                                    {{ payment.paymentDate|date('d/m/Y H:i') }}
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="preview-footer">
                        <div class="info-note">
                            <i class="fas fa-info-circle"></i>
                            Les modifications seront appliqu√©es apr√®s sauvegarde
                        </div>
                    </div>
                </div>
                
                <!-- ACTIONS DANGEREUSES -->
                <div class="danger-zone">
                    <h3 class="danger-title">
                        <i class="fas fa-skull-crossbones"></i>
                        ZONE DE DANGER
                    </h3>
                    
                    <div class="danger-actions">
                        <button type="button" class="danger-btn delete-btn" data-bs-toggle="modal" data-bs-target="#deleteModal">
                            <i class="fas fa-trash"></i>
                            SUPPRIMER CE PAIEMENT
                        </button>
                        
                        <a href="{{ path('app_payment_new') }}" class="danger-btn duplicate-btn">
                            <i class="fas fa-copy"></i>
                            DUPLIQUER
                        </a>
                    </div>
                    
                    <div class="danger-warning">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span>La suppression est d√©finitive et irr√©versible</span>
                    </div>
                </div>
                
                <!-- STATISTIQUES -->
                <div class="stats-preview">
                    <h3 class="stats-title">
                        <i class="fas fa-chart-line"></i>
                        INFORMATIONS
                    </h3>
                    
                    <div class="stats-grid">
                        <div class="stat-preview">
                            <div class="stat-icon">
                                <i class="far fa-calendar"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-label">CR√â√â LE</div>
                                <div class="stat-value">{{ payment.paymentDate|date('d/m/Y') }}</div>
                            </div>
                        </div>
                        
                        <div class="stat-preview">
                            <div class="stat-icon">
                                <i class="fas fa-history"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-label">MODIFI√â</div>
                                <div class="stat-value">Maintenant</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- DELETE MODAL -->
<div class="modal fade" id="deleteModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content aggressive-modal">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="fas fa-exclamation-triangle neon-text red"></i>
                    CONFIRMER LA SUPPRESSION
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="warning-message">
                    <i class="fas fa-radiation fa-2x"></i>
                    <h4>ATTENTION : ACTION IRR√âVERSIBLE</h4>
                    <p>Vous √™tes sur le point de supprimer d√©finitivement ce paiement.</p>
                </div>
                
                <div class="payment-details-modal">
                    <div class="detail-modal">
                        <span class="label">R√©f√©rence:</span>
                        <span class="value">{{ payment.transactionRef }}</span>
                    </div>
                    <div class="detail-modal">
                        <span class="label">Montant:</span>
                        <span class="value">{{ payment.amount|number_format(2, ',', ' ') }} ‚Ç¨</span>
                    </div>
                    <div class="detail-modal">
                        <span class="label">Date:</span>
                        <span class="value">{{ payment.paymentDate|date('d/m/Y H:i') }}</span>
                    </div>
                    <div class="detail-modal">
                        <span class="label">Statut:</span>
                        <span class="value {{ payment.paymentStatus }}">{{ payment.paymentStatus|upper }}</span>
                    </div>
                </div>
                
                <div class="confirmation-text">
                    <i class="fas fa-question-circle"></i>
                    <strong>√ätes-vous absolument s√ªr de vouloir continuer ?</strong>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-modal btn-cancel" data-bs-dismiss="modal">
                    <i class="fas fa-times"></i> ANNULER
                </button>
                {{ include('payment/_delete_form.html.twig') }}
            </div>
        </div>
    </div>
</div>

<!-- STYLES SP√âCIFIQUES √Ä L'√âDITION -->
<style>
/* FORMULAIRE */
.form-container {
    padding: 20px;
}

.neon-form {
    animation: fadeIn 0.8s ease-out;
}

.form-section {
    margin-bottom: 30px;
    padding: 20px;
    background: rgba(255, 255, 255, 0.03);
    border-radius: 10px;
    border: 1px solid rgba(255, 0, 51, 0.1);
}

.form-section-title {
    font-size: 1.2rem;
    color: var(--neon-blue);
    margin-bottom: 20px;
    padding-bottom: 10px;
    border-bottom: 2px solid rgba(0, 243, 255, 0.3);
    display: flex;
    align-items: center;
    gap: 10px;
}

.form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
}

@media (max-width: 768px) {
    .form-row {
        grid-template-columns: 1fr;
    }
}

.form-group {
    margin-bottom: 20px;
}

.form-group.full-width {
    grid-column: 1 / -1;
}

.form-label {
    display: block;
    margin-bottom: 8px;
    color: var(--neon-blue);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
    font-size: 0.9rem;
    display: flex;
    align-items: center;
    gap: 8px;
}

.neon-input, .neon-select {
    width: 100%;
    padding: 12px 15px;
    background: rgba(255, 255, 255, 0.05);
    border: 2px solid rgba(255, 0, 51, 0.2);
    border-radius: 8px;
    color: white;
    font-size: 1rem;
    transition: all 0.3s;
    font-family: 'Inter', sans-serif;
}

.neon-input:focus, .neon-select:focus {
    outline: none;
    border-color: var(--neon-red);
    box-shadow: 0 0 20px rgba(255, 0, 51, 0.3);
    background: rgba(255, 255, 255, 0.08);
}

.neon-select {
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%23ff0033' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 15px center;
    background-size: 12px;
}

.neon-select option {
    background: #1a1a2e;
    color: white;
    padding: 10px;
}

.datetime-picker {
    background: rgba(255, 255, 255, 0.05);
    border: 2px solid rgba(255, 0, 51, 0.2);
    color: white;
}

.form-error {
    color: var(--neon-red);
    font-size: 0.8rem;
    margin-top: 5px;
    min-height: 20px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* FORM ACTIONS */
.form-actions {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-top: 40px;
    padding-top: 30px;
    border-top: 2px solid rgba(255, 0, 51, 0.3);
}

.form-btn {
    padding: 15px 30px;
    border: 2px solid;
    border-radius: 10px;
    font-weight: 900;
    text-transform: uppercase;
    letter-spacing: 1px;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
    transition: all 0.3s;
    font-size: 1rem;
    font-family: 'Inter', sans-serif;
}

.save-btn {
    background: var(--neon-green);
    border-color: var(--neon-green);
    color: black;
}

.save-btn:hover {
    background: transparent;
    color: var(--neon-green);
    transform: translateY(-3px);
    box-shadow: 0 5px 20px rgba(0, 255, 65, 0.4);
}

.cancel-btn {
    background: rgba(255, 255, 255, 0.05);
    border-color: #777;
    color: #777;
}

.cancel-btn:hover {
    background: #777;
    color: black;
    transform: translateY(-3px);
    box-shadow: 0 5px 15px rgba(119, 119, 119, 0.3);
}

/* PREVIEW */
.preview-container {
    display: flex;
    flex-direction: column;
    gap: 25px;
}

.preview-card {
    background: rgba(20, 20, 30, 0.9);
    border: 2px solid rgba(0, 243, 255, 0.3);
    border-radius: 15px;
    padding: 25px;
    transition: all 0.3s;
    animation: previewGlow 2s infinite alternate;
}

@keyframes previewGlow {
    0% { box-shadow: 0 0 20px rgba(0, 243, 255, 0.2); }
    100% { box-shadow: 0 0 40px rgba(0, 243, 255, 0.4); }
}

.preview-card.success {
    border-color: rgba(0, 255, 65, 0.3);
}

.preview-card.pending {
    border-color: rgba(255, 204, 0, 0.3);
}

.preview-card.failed {
    border-color: rgba(255, 0, 51, 0.3);
}

.preview-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 1px solid rgba(0, 243, 255, 0.2);
}

.preview-id {
    font-family: 'Courier New', monospace;
    font-size: 1.1rem;
    color: var(--neon-blue);
    display: flex;
    align-items: center;
    gap: 10px;
    font-weight: 700;
}

.preview-status {
    padding: 8px 16px;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 900;
    text-transform: uppercase;
    letter-spacing: 1px;
    animation: statusPulse 2s infinite;
}

.preview-status.success {
    background: rgba(0, 255, 65, 0.2);
    color: var(--neon-green);
    border: 2px solid var(--neon-green);
}

.preview-status.pending {
    background: rgba(255, 204, 0, 0.2);
    color: var(--neon-yellow);
    border: 2px solid var(--neon-yellow);
}

.preview-status.failed {
    background: rgba(255, 0, 51, 0.2);
    color: var(--neon-red);
    border: 2px solid var(--neon-red);
}

@keyframes statusPulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}

.preview-body {
    text-align: center;
}

.preview-amount {
    font-size: 2.5rem;
    font-weight: 900;
    color: var(--neon-green);
    margin-bottom: 25px;
    text-shadow: 0 0 15px rgba(0, 255, 65, 0.5);
    animation: amountGlow 2s infinite alternate;
}

@keyframes amountGlow {
    0% { text-shadow: 0 0 10px rgba(0, 255, 65, 0.3); }
    100% { text-shadow: 0 0 20px rgba(0, 255, 65, 0.7); }
}

.preview-details {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-top: 20px;
}

.preview-footer {
    margin-top: 25px;
    padding-top: 20px;
    border-top: 1px solid rgba(0, 243, 255, 0.2);
}

.info-note {
    background: rgba(0, 243, 255, 0.1);
    border: 1px solid rgba(0, 243, 255, 0.3);
    border-radius: 8px;
    padding: 12px;
    color: var(--neon-blue);
    font-size: 0.9rem;
    display: flex;
    align-items: center;
    gap: 10px;
}

/* DANGER ZONE */
.danger-zone {
    background: rgba(255, 0, 51, 0.1);
    border: 2px solid var(--neon-red);
    border-radius: 15px;
    padding: 25px;
    animation: dangerPulse 2s infinite alternate;
}

@keyframes dangerPulse {
    0% { box-shadow: 0 0 10px rgba(255, 0, 51, 0.2); }
    100% { box-shadow: 0 0 20px rgba(255, 0, 51, 0.4); }
}

.danger-title {
    color: var(--neon-red);
    font-size: 1.3rem;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.danger-actions {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.danger-btn {
    padding: 15px;
    border: 2px solid;
    border-radius: 10px;
    font-weight: 900;
    text-transform: uppercase;
    letter-spacing: 1px;
    text-decoration: none;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    cursor: pointer;
    transition: all 0.3s;
    font-size: 0.9rem;
}

.delete-btn {
    background: rgba(255, 0, 51, 0.2);
    border-color: var(--neon-red);
    color: var(--neon-red);
}

.delete-btn:hover {
    background: var(--neon-red);
    color: black;
    transform: translateY(-3px);
    box-shadow: 0 5px 15px rgba(255, 0, 51, 0.4);
}

.duplicate-btn {
    background: rgba(157, 0, 255, 0.2);
    border-color: var(--neon-purple);
    color: var(--neon-purple);
}

.duplicate-btn:hover {
    background: var(--neon-purple);
    color: white;
    transform: translateY(-3px);
    box-shadow: 0 5px 15px rgba(157, 0, 255, 0.4);
}

.danger-warning {
    margin-top: 20px;
    padding: 15px;
    background: rgba(255, 0, 51, 0.15);
    border-radius: 8px;
    display: flex;
    align-items: center;
    gap: 10px;
    color: var(--neon-red);
    font-weight: 600;
}

/* STATS PREVIEW */
.stats-preview {
    background: rgba(157, 0, 255, 0.1);
    border: 2px solid var(--neon-purple);
    border-radius: 15px;
    padding: 25px;
}

.stats-title {
    color: var(--neon-purple);
    font-size: 1.3rem;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.stats-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
}

.stat-preview {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 15px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 10px;
    border: 1px solid rgba(157, 0, 255, 0.2);
    transition: all 0.3s;
}

.stat-preview:hover {
    transform: translateY(-5px);
    border-color: var(--neon-purple);
    background: rgba(157, 0, 255, 0.1);
}

.stat-icon {
    width: 45px;
    height: 45px;
    background: rgba(157, 0, 255, 0.2);
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--neon-purple);
    font-size: 1.2rem;
}

.stat-content {
    flex: 1;
}

.stat-label {
    font-size: 0.8rem;
    color: #aaa;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 5px;
}

.stat-value {
    font-size: 1.1rem;
    font-weight: 700;
    color: white;
}

/* MODAL */
.aggressive-modal {
    background: rgba(20, 20, 30, 0.95);
    border: 3px solid var(--neon-red);
    border-radius: 15px;
    backdrop-filter: blur(10px);
    box-shadow: 0 0 50px rgba(255, 0, 51, 0.5);
    animation: modalAppear 0.3s ease-out;
}

@keyframes modalAppear {
    from {
        opacity: 0;
        transform: scale(0.9) translateY(-20px);
    }
    to {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

.modal-header {
    border-bottom: 2px solid rgba(255, 0, 51, 0.3);
    padding: 20px 30px;
}

.modal-title {
    color: var(--neon-red);
    font-size: 1.3rem;
    font-weight: 900;
    text-transform: uppercase;
    letter-spacing: 1px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.btn-close {
    filter: invert(1) brightness(2);
    opacity: 0.7;
}

.btn-close:hover {
    opacity: 1;
}

.modal-body {
    padding: 30px;
}

.warning-message {
    text-align: center;
    margin-bottom: 25px;
    padding: 20px;
    background: rgba(255, 0, 51, 0.1);
    border-radius: 10px;
    border: 2px solid rgba(255, 0, 51, 0.3);
}

.warning-message i {
    color: var(--neon-red);
    margin-bottom: 15px;
}

.warning-message h4 {
    color: var(--neon-red);
    margin-bottom: 10px;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.warning-message p {
    color: #aaa;
    margin: 0;
}

.payment-details-modal {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 10px;
    padding: 20px;
    margin-bottom: 25px;
    border: 1px solid rgba(255, 0, 51, 0.2);
}

.detail-modal {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.detail-modal:last-child {
    border-bottom: none;
    padding-bottom: 0;
}

.detail-modal .label {
    color: #777;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    font-size: 0.9rem;
}

.detail-modal .value {
    color: white;
    font-weight: 700;
    font-size: 1rem;
}

.detail-modal .value.success {
    color: var(--neon-green);
}

.detail-modal .value.pending {
    color: var(--neon-yellow);
}

.detail-modal .value.failed {
    color: var(--neon-red);
}

.confirmation-text {
    background: rgba(255, 0, 51, 0.15);
    border-radius: 8px;
    padding: 15px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    color: var(--neon-red);
    font-weight: 700;
    text-align: center;
    border: 1px solid rgba(255, 0, 51, 0.3);
}

.modal-footer {
    border-top: 2px solid rgba(255, 0, 51, 0.3);
    padding: 20px 30px;
    display: flex;
    justify-content: center;
    gap: 20px;
}

.btn-modal {
    padding: 12px 30px;
    border: 2px solid;
    border-radius: 10px;
    font-weight: 900;
    text-transform: uppercase;
    letter-spacing: 1px;
    cursor: pointer;
    transition: all 0.3s;
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

.btn-cancel {
    background: rgba(255, 255, 255, 0.1);
    border-color: #777;
    color: #777;
}

.btn-cancel:hover {
    background: #777;
    color: black;
    transform: translateY(-2px);
}

.delete-form {
    display: inline;
}

.delete-form button {
    background: var(--neon-red);
    border: 2px solid var(--neon-red);
    color: black;
    padding: 12px 30px;
    border-radius: 10px;
    font-weight: 900;
    text-transform: uppercase;
    letter-spacing: 1px;
    cursor: pointer;
    transition: all 0.3s;
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

.delete-form button:hover {
    background: transparent;
    color: var(--neon-red);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(255, 0, 51, 0.4);
}

/* VARIABLES */
:root {
    --neon-red: #ff0033;
    --neon-blue: #00f3ff;
    --neon-green: #00ff41;
    --neon-purple: #9d00ff;
    --neon-yellow: #ffcc00;
}

@media (max-width: 1200px) {
    .dual-columns {
        grid-template-columns: 1fr;
    }
}
</style>

<script>
// LIVE PREVIEW UPDATES
document.addEventListener('DOMContentLoaded', function() {
    // √âl√©ments du formulaire
    const amountInput = document.querySelector('#payment_amount');
    const methodSelect = document.querySelector('#payment_paymentMethod');
    const statusSelect = document.querySelector('#payment_paymentStatus');
    const refInput = document.querySelector('#payment_transactionRef');
    const dateInput = document.querySelector('#payment_paymentDate');
    
    // √âl√©ments de pr√©visualisation
    const previewAmount = document.getElementById('preview-amount');
    const previewMethod = document.getElementById('preview-method');
    const previewStatus = document.getElementById('preview-status');
    const liveStatus = document.getElementById('live-status');
    const previewRef = document.getElementById('preview-ref');
    const previewDate = document.getElementById('preview-date');
    
    // Fonction pour formater le montant
    function formatAmount(value) {
        const num = parseFloat(value) || 0;
        return num.toFixed(2).replace('.', ',').replace(/\B(?=(\d{3})+(?!\d))/g, ' ') + ' ‚Ç¨';
    }
    
    // Fonction pour obtenir l'ic√¥ne de m√©thode
    function getMethodIcon(method) {
        switch(method) {
            case 'card': return '<i class="fas fa-credit-card"></i> CARTE';
            case 'paypal': return '<i class="fab fa-paypal"></i> PAYPAL';
            default: return '<i class="fas fa-wallet"></i> WALLET';
        }
    }
    
    // Fonction pour mettre √† jour la pr√©visualisation
    function updatePreview() {
        // Montant
        if (amountInput) {
            previewAmount.textContent = formatAmount(amountInput.value);
        }
        
        // M√©thode
        if (methodSelect) {
            previewMethod.innerHTML = getMethodIcon(methodSelect.value);
        }
        
        // Statut
        if (statusSelect) {
            const status = statusSelect.value;
            previewStatus.textContent = status.toUpperCase();
            liveStatus.textContent = status.toUpperCase();
            
            // Mettre √† jour les classes
            previewStatus.className = 'preview-status ' + status;
            liveStatus.className = 'badge-count ' + status;
            
            // Mettre √† jour la carte de pr√©visualisation
            const previewCard = document.getElementById('payment-preview');
            previewCard.className = 'preview-card ' + status;
        }
        
        // R√©f√©rence
        if (refInput && refInput.value) {
            previewRef.textContent = refInput.value;
        }
        
        // Date
        if (dateInput && dateInput.value) {
            const date = new Date(dateInput.value);
            previewDate.textContent = date.toLocaleDateString('fr-FR') + ' ' + 
                                     date.toLocaleTimeString('fr-FR', {hour: '2-digit', minute: '2-digit'});
        }
    }
    
    // √âcouter les changements
    if (amountInput) amountInput.addEventListener('input', updatePreview);
    if (methodSelect) methodSelect.addEventListener('change', updatePreview);
    if (statusSelect) statusSelect.addEventListener('change', updatePreview);
    if (refInput) refInput.addEventListener('input', updatePreview);
    if (dateInput) dateInput.addEventListener('change', updatePreview);
    
    // Initialiser la pr√©visualisation
    updatePreview();
    
    // Animation pour le formulaire
    const formGroups = document.querySelectorAll('.form-group');
    formGroups.forEach((group, index) => {
        group.style.animationDelay = `${index * 0.1}s`;
        group.style.animation = 'fadeInUp 0.5s ease-out forwards';
    });
    
    // Ajouter l'animation CSS
    const style = document.createElement('style');
    style.textContent = `
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .form-group {
            opacity: 0;
        }
    `;
    document.head.appendChild(style);
    
    // Confirmation avant envoi
    const form = document.getElementById('payment-form');
    if (form) {
        form.addEventListener('submit', function(e) {
            const status = statusSelect ? statusSelect.value : '';
            if (status === 'failed') {
                if (!confirm('‚ö†Ô∏è Vous √™tes sur le point de marquer ce paiement comme √âCHOU√â. Voulez-vous continuer ?')) {
                    e.preventDefault();
                    return false;
                }
            }
        });
    }
});
</script>
{% endblock %}