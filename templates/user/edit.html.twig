{% extends 'base.html.twig' %}

{% block title %}Edit User - Phantom Force{% endblock %}

{% block body %}
<div class="hero">
    <h1>Edit User Profile</h1>
    <p>Update your profile information</p>
</div>

<div class="container" style="max-width: 800px; margin: 0 auto;">
    <div class="module-card" style="margin-top: 40px;">
        <div class="module-icon" style="background: var(--blue-gradient);">
            <i class="fas fa-user-edit"></i>
        </div>
        <h2 class="module-title">Edit Profile Information</h2>
        
        {{ include('user/_form.html.twig', {'button_label': 'Update'}) }}
        
        <div class="module-stats" style="margin-top: 30px; border-top: 1px solid var(--border-light); padding-top: 20px; justify-content: space-between;">
            
            
            <div style="display: flex; gap: 10px;">
                <a href="{{ path('app_user_show', {'id': user.id}) }}" class="btn" style="background: var(--green-gradient); color: white;">
                    <i class="fas fa-eye"></i> View Profile
                </a>
                
                {# Only show delete for admins or own profile #}
                {% if is_granted('ROLE_ADMIN') or app.user.id == user.id %}
                    <button type="button" class="btn" style="background: var(--red-gradient); color: white;" 
                            onclick="if(confirm('Are you sure you want to delete this user?')) { document.getElementById('delete-form').submit(); }">
                        <i class="fas fa-trash"></i> Delete User
                    </button>
                {% endif %}
            </div>
        </div>
    </div>
</div>

{# Hidden delete form #}
{% if is_granted('ROLE_ADMIN') or app.user.id == user.id %}
    <form id="delete-form" method="post" action="{{ path('app_user_delete', {'id': user.id}) }}" style="display: none;">
        <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ user.id) }}">
    </form>
{% endif %}

{% endblock %}